(this.webpackJsonpstranger_things=this.webpackJsonpstranger_things||[]).push([[0],{37:function(e,t,n){"use strict";n.r(t);var c=n(7),r=n(2),i=n.n(r),a=n(6),s=n(3),o=n(1),u=n(21),l=n.n(u),j="https://fitnesstrac-kr.herokuapp.com/api",b=function(e){localStorage.setItem("auth-token",e)},d=function(){return localStorage.getItem("auth-token")},h=function(){var e=Object(a.a)(i.a.mark((function e(t,n){var c,r,a,s,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=o.length>2&&void 0!==o[2]&&o[2],r="".concat(j,"/users")+(c?"/register":"/login"),e.prev=2,e.next=5,fetch(r,{method:"POST",headers:p(),body:JSON.stringify({username:t,password:n})});case 5:return a=e.sent,e.next=8,a.json();case 8:return(s=e.sent).token&&b(s.token),e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(2),console.log("Error from API index file:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}();function p(){var e={"Content-Type":"application/json"};return d()&&(e.Authorization="Bearer ".concat(d())),e}var O=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,c,r,a,s,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"GET",c=o.length>2&&void 0!==o[2]?o[2]:null,r={method:n,headers:p()},c&&(r.body=JSON.stringify(c)),e.next=6,fetch(t,r);case 6:return a=e.sent,console.log("this is what we are sending in the fetch",r),console.log("this is the initial response:",a),e.next=11,a.json();case 11:return s=e.sent,console.log("result from fetch in api index file:",s),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=n(0),x=function(e){var t=Object(o.useState)(""),n=Object(s.a)(t,2),r=n[0],u=n[1],l=Object(o.useState)(""),b=Object(s.a)(l,2),d=b[0],h=b[1],p=Object(o.useState)(""),x=Object(s.a)(p,2),f=x[0],m=x[1],g=e.activityList,y=e.setActivityList,k=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={name:r,description:d},e.prev=2,e.next=5,O("".concat(j,"/activities"),"POST",n);case 5:if(!(a=e.sent).error){e.next=14;break}return console.log("result.error = ",a.error),m(a.error),u(""),h(""),e.abrupt("return");case 14:console.log("activity list:",g),console.log("send-data:",a),y([].concat(Object(c.a)(g),[a])),u(""),h("");case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),console.error(e.t0);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"newActivity",children:Object(v.jsxs)("form",{onSubmit:k,className:"newActivityForm",children:[Object(v.jsx)("h3",{children:"Create Activity"}),f?Object(v.jsx)("h5",{className:"errorMessage",children:f}):"",Object(v.jsx)("input",{type:"text",value:r,placeholder:"Activity Name",onChange:function(e){return u(e.target.value)}}),Object(v.jsx)("textarea",{type:"text",value:d,placeholder:"Description of Activity",onChange:function(e){return h(e.target.value)}}),Object(v.jsx)("button",{className:"Submit",type:"submit",value:"Submit",children:"Add Activity"})]})})})},f=function(e){var t=e.activityList,n=e.setActivityList,c=e.isLoggedIn,r=e.filterTerm;e.setFilterTerm;return Object(v.jsxs)("div",{className:"Activities",children:[c?Object(v.jsx)(x,{activityList:t,setActivityList:n}):"",t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())})).map((function(e,t){return Object(v.jsxs)("div",{className:"activity",children:[Object(v.jsx)("h2",{children:e.name}),Object(v.jsx)("p",{children:e.description})]},t)}))]})},m=function(e){var t=e.routineList,n=e.filterTerm,c=e.setFilterTerm;return Object(v.jsx)("div",{className:"routines",children:t.filter((function(e){return e.creatorName.toLowerCase().includes(n.toLowerCase())||e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e,t){return Object(v.jsxs)("div",{className:"routine",children:[Object(v.jsx)("h2",{children:e.name}),Object(v.jsxs)("p",{children:["Goal: ",e.goal]}),Object(v.jsxs)("p",{children:["Created by:","",Object(v.jsx)("span",{children:Object(v.jsxs)("a",{className:"tag",href:"#",onClick:function(t){t.preventDefault(),c(e.creatorName)},children:["",e.creatorName]})})]}),e.activities&&e.activities.length>0?Object(v.jsx)("h3",{children:"Activities in this Routine:"}):null,e.activities&&e.activities.map((function(e,t){return Object(v.jsxs)("div",{className:"activity",children:[Object(v.jsx)("h3",{children:e.name}),Object(v.jsx)("p",{children:e.description}),Object(v.jsxs)("p",{children:["Do this: ",e.count," ",e.count>1?"times":"time"]}),Object(v.jsxs)("p",{children:["Duration: ",e.duration]})]},t)}))]},t)}))})},g=n(18),y=function(e){var t,n=Object(o.useState)(""),r=Object(s.a)(n,2),u=r[0],l=r[1],b=Object(o.useState)(""),d=Object(s.a)(b,2),h=d[0],p=d[1],x=Object(o.useState)(""),f=Object(s.a)(x,2),m=f[0],y=f[1],k=Object(o.useState)(""),w=Object(s.a)(k,2),N=w[0],C=w[1],S=Object(o.useState)([]),L=Object(s.a)(S,2),A=L[0],R=L[1],D=Object(o.useState)(null),I=Object(s.a)(D,2),T=I[0],E=I[1],F=Object(o.useState)(""),P=Object(s.a)(F,2),M=P[0],G=P[1];Object(o.useEffect)((function(){l(H.name||""),p(H.goal||"")}),[]);var J=e.addNewRoutine,_=e.routineList,B=e.user,H=e.routine,U=e.setRoutine,z=e.activityList,W=e.setRoutineList,q=e.isLoggedIn,K=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n={name:u,goal:h,isPublic:!0},!H.id){e.next=21;break}return e.prev=3,e.next=6,O("".concat(j,"/routines/").concat(H.id),"PATCH",n);case 6:r=_.indexOf(H),(a=Object(c.a)(_))[r].name=u,a[r].description=h,W(a),l(""),p(""),U(""),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:e.next=35;break;case 21:return e.prev=21,e.next=24,O("".concat(j,"/routines"),"POST",n);case 24:(s=e.sent).creatorName=B.username,console.log("the newRoutine response is:",s),J(s),l(""),p(""),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(21),console.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[3,16],[21,32]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[q?Object(v.jsx)("div",{className:"newRoutine",children:Object(v.jsxs)("form",{onSubmit:K,className:"newRoutineForm",children:[H&&""!==u?Object(v.jsx)("h3",{children:"Edit Routine"}):Object(v.jsx)("h3",{children:"Create Routine"}),Object(v.jsx)("input",{type:"text",value:u,placeholder:"Routine Name",onChange:function(e){return l(e.target.value)}}),Object(v.jsx)("textarea",{type:"text",value:h,placeholder:"Description of Routine",onChange:function(e){return p(e.target.value)}}),Object(v.jsx)("button",{className:"Submit",type:"submit",value:"Submit",children:"Submit"}),H.id&&""!==u?Object(v.jsx)("button",{onClick:function(e){e.preventDefault(),U(""),l(""),p("")},children:"Cancel"}):null]})}):null,Object(v.jsx)("div",(t={className:"myRoutines"},Object(g.a)(t,"className","routines"),Object(g.a)(t,"children",_.map((function(e){return B.id===e.creatorId?Object(v.jsxs)("div",{className:"routine",children:[Object(v.jsx)("h2",{children:e.name}),Object(v.jsxs)("p",{children:["Goal: ",e.goal]}),Object(v.jsx)("br",{}),console.log(e.activities),e.activities&&e.activities.map((function(t,n){return B.id===e.creatorId?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"activity",children:[Object(v.jsx)("h2",{children:t.name}),Object(v.jsx)("p",{children:t.description}),M.id===t.id?Object(v.jsxs)("span",{children:[Object(v.jsx)("input",{type:"text",placeholder:"Enter Rep Count",onChange:function(e){return y(e.target.value)}}),Object(v.jsx)("input",{type:"text",placeholder:"Enter Duration",onChange:function(e){return C(e.target.value)}}),Object(v.jsx)("button",{onClick:function(){var r=Object(a.a)(i.a.mark((function r(a){var s,o,u;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a.preventDefault(),s={activityId:t.id,count:m,duration:N},r.prev=2,r.next=5,O("".concat(j,"/routine_activities/").concat(t.routineActivityId),"PATCH",s);case 5:n>-1&&(o=Object(c.a)(_),u=o.indexOf(e),o[u].activities[n].count=m,o[u].activities[n].duration=N,W(o)),G(""),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),console.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e){return r.apply(this,arguments)}}(),children:"Submit Changes"}),Object(v.jsx)("button",{onClick:function(e){e.preventDefault(),G("")},children:"Cancel"})]}):Object(v.jsxs)(v.Fragment,{children:[" ",Object(v.jsxs)("span",{children:[Object(v.jsxs)("p",{children:["Do this: ",t.count," ",t.count>1?"times":"time"]}),Object(v.jsxs)("p",{children:["Duration: ",t.duration]})," "]}),Object(v.jsx)("button",{className:"routine-activity-button",onClick:function(n){n.preventDefault(),U(e),console.log("activities in the routine are",e.activities),G(t)},children:"Edit Activity"}),Object(v.jsx)("button",{className:"routine-activity-button",onClick:function(){var n=Object(a.a)(i.a.mark((function n(r){var a,s,o,u;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,a="".concat(j,"/routine_activities/").concat(t.routineActivityId),n.next=5,O(a,"DELETE");case 5:s=Object(c.a)(_),o=s.indexOf(e),u=s[o].activities.indexOf(t),s[o].activities.splice(u,1),W(s),G(""),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.error(n.t0);case 16:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}(),children:"Delete Activity"})]})]},n)," "]}):null})),Object(v.jsx)("button",{onClick:function(t){t.preventDefault(),U(e),console.log("the current routine is",e.id),l(e.name),p(e.goal)},children:"Edit Routine"}),Object(v.jsx)("button",{onClick:function(t){if(t.preventDefault(),U(e),console.log("the routine is:",e),E(e.id),!e.activities){var n=Object(c.a)(_),r=e.activities=[],i=_.indexOf(e);_[i].activities=r,n.splice(i,1,e),W(n)}},children:"Add Activities"}),Object(v.jsx)("button",{onClick:function(){var t=Object(a.a)(i.a.mark((function t(n){var r,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),U(e),t.prev=2,r="".concat(j,"/routines/").concat(e.id),a=Object(c.a)(_),t.next=7,O(r,"DELETE");case 7:s=a.indexOf(e),a.splice(s,1),W(a),U(""),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}(),children:"Delete Routine"}),T===e.id?Object(v.jsx)("div",{className:"routine-modal",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("select",{id:"routineActivityList",className:"modal-content",children:z.map((function(e,t){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("option",{value:e.id,children:e.name},t)})}))}),Object(v.jsxs)("button",{onClick:function(e){var t=document.getElementById("routineActivityList"),n={id:t.options[t.selectedIndex].value,name:t.options[t.selectedIndex].innerText};console.log("result is: ",n),e.preventDefault();var r=[].concat(Object(c.a)(A),[n]);R(r)},children:[console.log("the placeholders list is now:",A),"Select Activity"]}),A.map((function(t){return Object(v.jsxs)("div",{className:"activity",value:t.id,children:[Object(v.jsx)("p",{children:t.name}),Object(v.jsxs)("span",{children:[Object(v.jsx)("input",{type:"text",placeholder:"Enter Rep Count",onChange:function(e){return y(e.target.value)}}),Object(v.jsx)("input",{type:"text",placeholder:"Enter Duration",onChange:function(e){return C(e.target.value)}}),Object(v.jsx)("button",{onClick:function(){var n=Object(a.a)(i.a.mark((function n(r){var a,s,o,u,l,b;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),a={activityId:t.id,count:m,duration:N},n.prev=2,n.next=5,O("".concat(j,"/routines/").concat(e.id,"/activities"),"POST",a);case 5:s=Object(c.a)(A),o=s.indexOf(t),s.splice(o,1),R(s),u={id:t.id,name:t.name,description:t.description,duration:N,count:m,routineActivityId:t.routineActivityId},l=Object(c.a)(_),b=l.indexOf(e),console.log("the index of the push is",b),console.log("the newList[index] is",l[b]),l[b].activities.push(u),W(l),A.length<0&&E([]),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(2),console.log(n.t0);case 22:case"end":return n.stop()}}),n,null,[[2,19]])})));return function(e){return n.apply(this,arguments)}}(),children:"Add to Routine"}),Object(v.jsx)("button",{onClick:function(n){n.preventDefault();var r=Object(c.a)(A),i=r.indexOf(t);r.splice(i,1),R(r),console.log("the current routine is:",e)},children:"Delete Activity"})]})]},t.id)}))]})}):null]},e.id):""}))),t))]})},k=function(e){var t=e.setIsLoggedIn,n=e.message,c=e.setMessage,r=Object(o.useState)(""),u=Object(s.a)(r,2),l=u[0],j=u[1],b=Object(o.useState)(""),d=Object(s.a)(b,2),p=d[0],O=d[1];return Object(v.jsxs)("form",{className:"auth",onSubmit:function(e){return e.preventDefault()},children:[Object(v.jsx)("h3",{children:"Log-In or Sign-Up"}),Object(v.jsx)("h5",{className:"message",children:n}),Object(v.jsx)("input",{type:"text",value:l,onChange:function(e){return j(e.target.value)},placeholder:"username",className:"login"}),Object(v.jsx)("input",{type:"password",value:p,onChange:function(e){return O(e.target.value)},placeholder:"password",className:"login"}),Object(v.jsx)("button",{onClick:function(){var e=Object(a.a)(i.a.mark((function e(r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,h(l,p,!0);case 4:if(!(a=e.sent).error){e.next=10;break}return c(a.error),e.abrupt("return",Object(v.jsx)("h5",{className:"message",children:n}));case 10:t(!0),c(a.message);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),children:"Register"}),Object(v.jsx)("button",{onClick:function(){var e=Object(a.a)(i.a.mark((function e(r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,h(l,p);case 4:if(!(a=e.sent).error){e.next=10;break}return c(a.error),e.abrupt("return",Object(v.jsx)("h5",{className:"message",children:n}));case 10:t(!0),c(a.message);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),children:"Log In"})]})},w=function(e){var t=e.filterTerm,n=e.setFilterTerm;return Object(v.jsxs)("form",{id:"search",className:"search",onSubmit:function(e){e.preventDefault()},children:[Object(v.jsx)("input",{id:"keywords",type:"text",placeholder:"Search",className:"search",value:t,onChange:function(e){n(e.target.value)}}),Object(v.jsx)("button",{onClick:function(){return n("")},children:"RESET FILTER"})]})},N=n(4),C=n(12),S=n.p+"static/media/kettles.b4bf8643.jpg",L=function(){var e=Object(o.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],u=Object(o.useState)([]),l=Object(s.a)(u,2),b=l[0],d=l[1],h=Object(o.useState)([]),p=Object(s.a)(h,2),x=p[0],g=p[1],L=Object(o.useState)(!1),A=Object(s.a)(L,2),R=A[0],D=A[1],I=Object(o.useState)(""),T=Object(s.a)(I,2),E=T[0],F=T[1],P=Object(o.useState)(""),M=Object(s.a)(P,2),G=M[0],J=M[1],_=Object(o.useState)({}),B=Object(s.a)(_,2),H=B[0],U=B[1],z=Object(o.useState)(""),W=Object(s.a)(z,2),q=W[0],K=W[1];Object(o.useEffect)((function(){O(j+"/routines").then((function(e){r(e)})).catch(console.error)}),[]),Object(o.useEffect)((function(){O(j+"/activities").then((function(e){d(e)})).catch(console.error)}),[]),Object(o.useEffect)((function(){function e(){return(e=Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(j+"/users/me");case 2:t=e.sent,U(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[R]);console.log("the routine list is:",n);var Q=Object(N.e)();return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsxs)("header",{children:[Object(v.jsx)("h1",{children:"Welcome to FitnessTrackr"}),Object(v.jsxs)("nav",{children:[Object(v.jsx)(C.b,{to:"/",children:"Home "}),Object(v.jsx)(C.b,{to:"/Activities",children:" Activities "}),Object(v.jsx)(C.b,{to:"/Routines",children:" Routines "}),R?Object(v.jsxs)(v.Fragment,{children:[" ",Object(v.jsx)(C.b,{to:"/MyRoutines",children:" My Routines"})]}):""]}),R?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"authenticated-nav",children:[Object(v.jsx)("h1",{className:"loginMessage",children:E}),Object(v.jsx)("button",{className:"logout-button",onClick:function(){localStorage.removeItem("auth-token"),D(!1),F(""),Q.push("/"),K("")},children:"LOG OUT"})]})}):Object(v.jsx)(k,{setIsLoggedIn:D,isLoggedIn:R,message:E,setMessage:F})]}),Object(v.jsxs)("main",{children:[Object(v.jsx)(N.a,{exact:!0,path:"/",children:Object(v.jsx)("img",{className:"homePhoto",src:S,alt:"Photo of kettlebells"})}),Object(v.jsxs)(N.a,{exact:!0,path:"/Activities",children:[Object(v.jsx)(w,{filterTerm:G,setFilterTerm:J}),Object(v.jsx)(f,{activityList:b,isLoggedIn:R,setActivityList:d,filterTerm:G,setFilterTerm:J})]}),Object(v.jsxs)(N.a,{exact:!0,path:"/Routines",children:[Object(v.jsx)(w,{filterTerm:G,setFilterTerm:J}),Object(v.jsx)(m,{routineList:n,setRoutineList:r,filterTerm:G,setFilterTerm:J,isLoggedIn:R})]}),Object(v.jsx)(N.a,{exact:!0,path:"/MyRoutines",children:Object(v.jsx)(y,{routineList:n,setRoutineList:r,myRoutines:x,setmyRoutines:g,addNewRoutine:function(e){return r([e].concat(Object(c.a)(n)))},user:H,routine:q,setRoutine:K,activityList:b,isLoggedIn:R})})]})]})};l.a.render(Object(v.jsx)(C.a,{children:Object(v.jsx)(L,{})}),document.getElementById("app"))}},[[37,1,2]]]);
//# sourceMappingURL=main.d8fa8c64.chunk.js.map